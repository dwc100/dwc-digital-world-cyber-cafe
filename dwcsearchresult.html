<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DWC Smart Educational Search</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
body {
    margin:0;
    padding:0;
    font-family:'Poppins',sans-serif;
    background:#fdfcff;
    color:#1a0033;
}

/* Outer glow frame */
.glow-frame {
    position:fixed;
    inset:0;
    border:0.4vw solid rgba(0,0,255,0.7);
    box-shadow:0 0 3vw #00f, 0 0 5vw #0099ff;
    pointer-events:none;
    border-radius:1.2vw;
    z-index:2;
}

/* Search box with glowing underline */
.search-box {
    position:sticky;
    top:20px;
    margin:20px auto;
    max-width:700px;
    width:90%;
    display:flex;
    align-items:center;
    background: rgba(255,255,255,0.2);
    border-radius:50px;
    padding:1vw 1.5vw;
    box-shadow:0 0 2vw #00f,0 0 3vw #0099ff;
    z-index:5;
    border-bottom: 0.3vw solid #00f;
    transition: all 0.3s ease;
}
.search-box:hover {
    border-bottom-color:#0066ff;
    box-shadow:0 0 2.5vw #00f, 0 0 4vw #00ccff;
}

.search-box input {
    flex:1;
    padding:1vw;
    border:none;
    outline:none;
    font-size:1.1rem;
    background:transparent;
    color:#1a0033;
}

.search-box button {
    background:none;
    border:none;
    cursor:pointer;
    font-size:1.4rem;
    color:#0066ff;
    transition:0.3s;
}
.search-box button:hover {
    color:#00f;
}

/* Suggestions */
#suggestionBox {
    position:absolute;
    top:100%;
    width:100%;
    background: rgba(255,255,255,0.25);
    backdrop-filter: blur(10px);
    border-radius:20px;
    border: 2px solid rgba(0,0,255,0.3);
    display:none;
    box-shadow:0 0 2vw #00f,0 0 3vw #0099ff;
    margin-top:10px;
    z-index:10;
    transition:0.3s;
}
#suggestionBox div {
    padding:12px 15px;
    cursor:pointer;
    transition:0.2s;
    color:#1a0033;
}
#suggestionBox div:hover, #suggestionBox .active {
    background: rgba(0,0,255,0.2);
    color:#0033cc;
}

/* Page Title */
.page-title {
    text-align:center;
    margin-top:20px;
    font-size:2rem;
    font-weight:700;
    background: linear-gradient(90deg, #0066ff, #00f, #3399ff);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

/* Category filter buttons */
.category-filter {
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:10px;
    margin-bottom:20px;
}
.category-filter button {
    padding:5px 15px;
    border:none;
    border-radius:20px;
    cursor:pointer;
    background: rgba(0,0,255,0.2);
    color:#0033cc;
    transition:0.3s;
}
.category-filter button.active, .category-filter button:hover {
    background:#0066ff;
    color:white;
}

/* Result boxes */
.result-box {
    width:90%;
    max-width:800px;
    margin:25px auto;
    padding:20px;
    border-radius:20px;
    background: rgba(255,255,255,0.25);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(0,0,255,0.3);
    box-shadow:0 0 2vw rgba(0,0,255,0.35),0 0 3vw rgba(0,102,255,0.35);
    transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.5s ease;
    opacity:0;
    transform:translateY(20px);
}
.result-box.show {
    opacity:1;
    transform:translateY(0);
}
.result-title {
    font-size:1.4rem;
    font-weight:700;
    color:#0033cc;
    text-decoration:none;
}
.result-title:hover {
    text-decoration:underline;
}
.result-link {
    font-size:0.9rem;
    margin-top:5px;
    color:#006621;
}
.result-desc {
    margin-top:8px;
    font-size:1rem;
    color:#1a0033;
}
.highlight {
    background:yellow;
    font-weight:600;
    color:#1a0033;
}

/* Back button */
.back-btn {
    display:block;
    margin:20px auto;
    padding:10px 25px;
    font-size:1rem;
    border-radius:40px;
    border:2px solid rgba(0,0,255,0.4);
    background: rgba(255,255,255,0.25);
    backdrop-filter: blur(10px);
    cursor:pointer;
    box-shadow:0 0 1.5vw rgba(0,0,255,0.45),0 0 2.5vw rgba(0,76,255,0.4);
    transition:0.3s ease;
}
.back-btn:hover {
    transform: scale(1.08);
}

/* Search engines buttons */
.search-engines {
    display:flex;
    justify-content:center;
    gap:15px;
    margin:15px 0;
}
.search-engines button {
    padding:7px 15px;
    border:none;
    border-radius:15px;
    cursor:pointer;
    background: rgba(0,0,255,0.2);
    color:#0033cc;
    font-weight:500;
    transition:0.3s;
}
.search-engines button:hover {
    background:#0066ff;
    color:white;
}
.scrollable {
    height: calc(100vh - 2px); /* viewport height minus HR */
    overflow-y: auto;
    display: block; /* flex remove karen */
    width: 100%;    /* full width */
    padding-top: 20px; /* HR ke neeche content start kare */
    box-sizing: border-box;
}

.item {
    width: 50%;         /* item ka width */
    margin: 0 auto 10px auto; /* horizontal center */
    padding: 10px;
    background-color: #f2f2f2;
    border: 1px solid #ddd;
    text-align: center;
}

.line {
  border: 0;
  height: 1px; /* thin line */
  width: 100%;
  background-color: purple; /* line color */
  box-shadow: 0 0 4px rgba(128, 0, 128, 0.4); /* ‡§π‡§≤‡•ç‡§ï‡•Ä ‡§∏‡•Ä shadow */
}


/* Animation for glowing effect */
@keyframes glowPulse {
  0% {
    box-shadow: 0 0 5px purple, 0 0 10px purple, 0 0 15px purple;
  }
  50% {
    box-shadow: 0 0 15px purple, 0 0 30px purple, 0 0 45px purple;
  }
  100% {
    box-shadow: 0 0 5px purple, 0 0 10px purple, 0 0 15px purple;
  }
}

</style>
</head>
<body>

<div class="glow-frame"></div>
<!-- Search Box -->
<div class="search-box">
    <input type="text" id="mySearch" placeholder="Search..." onkeyup="showSuggestions()">
    <button id="searchButton">üîç</button>
</div>
<hr class="line">
<div class="scrollable">
<!-- Suggestions Box -->
<div id="suggestionBox"></div>

<!-- Search engines -->

<h2 class="page-title" id="searchFor"></h2>

<!-- Category filters -->
<div class="category-filter" id="categoryFilter"></div>

<!-- Results -->
<div id="resultsArea"></div>

<!-- Back button -->
<button class="back-btn" onclick="window.location.href='index.html'">‚Üê Back to Home</button>
</div>

<script>
/* ---------------- DATABASE ---------------- */
const database = [
  {keywords:["class 9th","class 9","9th"],title:"Class 9th Notes ‚Äì Full PDF",link:"class9-notes.html",desc:"All Class 9 subjects ‚Äî Maths, Science, English, Hindi Notes.",size:10240,category:"Class 9"},
   {keywords:["dwc business","dwc project manager","shop manager","project"],title:"dwc business manager",link:"dwcbusiness.html",desc:"all business servicess ‚Äî manager, data saver, business data protector, dwc business maker.",size:10250,category:"Class 9"},
  {keywords:["DWC","DWC Informeton","what iis dwc","how t use dwc"],title:"full informeton about dwc",link:"aboutdwc.html",desc:"All Informeton dwc‚Äî about dwwc, dwc teechnalogy, dwc softwares, dwc Notes.",size:150000,category:"dwc"},
  {keywords:["class 9th chapter 01"],title:"Class 9th Chapter 01 Notes",link:"class9-chapter01.html",desc:"Full explanation notes of Chapter 01.",size:2048,category:"Class 9"},
  {keywords:["class 9th chapter 02"],title:"Class 9th Chapter 02 Notes",link:"class9-chapter02.html",desc:"Detailed notes of Chapter 02.",size:3072,category:"Class 9"},
  {keywords:["class 10th notes"],title:"Class 10th Notes ‚Äì Full PDF",link:"class10-notes.html",desc:"All Class 10 subjects notes.",size:12288,category:"Class 10"},
  {keywords:["class 9th science"],title:"Class 9th Science Notes",link:"class9-science.html",desc:"Physics, Chemistry & Biology notes.",size:4096,category:"Science"},
  {keywords:["class 9th math"],title:"Class 9th Math Notes",link:"class9-math.html",desc:"NCERT math solutions & notes.",size:2048,category:"Math"},
  {keywords:["what is cell","definition of cell","cell meaning"],title:"Definition of Cell",link:"cell-definition.html",desc:"Explanation of what a cell is in Biology.",size:1024,category:"Science"},
  {keywords:["photosynthesis","what is photosynthesis"],title:"Photosynthesis Notes",link:"photosynthesis.html",desc:"Definition, process, and importance of photosynthesis.",size:2048,category:"Science"},
  {keywords:["what is AI","artificial intelligence"],title:"What is Artificial Intelligence (AI)",link:"ai-notes.html",desc:"Introduction to AI concepts, types, and applications.",size:2048,category:"Technology"},
  {keywords:["everything notes","complete learning material"],title:"Complete Learning Material",link:"all-notes.html",desc:"All subjects and classes notes in one place.",size:51200,category:"All"}
];

/* ---------------- SUGGESTIONS ---------------- */
const suggestionsData = database.map(d=>d.title);
let selectedSuggestion = -1;

function showSuggestions(){
    let input=document.getElementById("mySearch").value.toLowerCase();
    let box=document.getElementById("suggestionBox"); box.innerHTML=""; box.style.display="none"; selectedSuggestion=-1;
    if(input==="") return;
    let filtered=suggestionsData.filter(s=>s.toLowerCase().includes(input));
    filtered.forEach(item=>{
        let div=document.createElement("div");
        div.innerHTML=item.replace(new RegExp(input,"gi"),match=>`<span class="highlight">${match}</span>`);
        div.onclick=()=>{document.getElementById("mySearch").value=item; doSearch();};
        box.appendChild(div);
    });
    if(filtered.length>0) box.style.display="block";
}

document.getElementById("mySearch").addEventListener("keydown",function(event){
    let box=document.getElementById("suggestionBox");
    let items=box.children;
    if(event.key==="ArrowDown"){event.preventDefault(); if(selectedSuggestion<items.length-1){selectedSuggestion++; highlightSuggestion();}}
    if(event.key==="ArrowUp"){event.preventDefault(); if(selectedSuggestion>0){selectedSuggestion--; highlightSuggestion();}}
    if(event.key==="Enter"){event.preventDefault(); if(selectedSuggestion>=0){items[selectedSuggestion].click();} else {doSearch();}}
});
function highlightSuggestion(){let box=document.getElementById("suggestionBox");Array.from(box.children).forEach((c,i)=>c.classList.toggle("active",i===selectedSuggestion));}
function doSearch(){let query=document.getElementById("mySearch").value.trim(); if(query!=="") window.location.href=window.location.pathname+"?q="+encodeURIComponent(query);}

/* ---------------- QUERY ---------------- */
const urlParams = new URLSearchParams(window.location.search);
const query = urlParams.get("q") || "";

// Search box me bhi kuch naa aaye
document.getElementById("mySearch").value = "";

// "Search Results For" ka pura section hide
document.getElementById("searchFor").style.display = "none";

/* ---------------- HELPER FUNCTIONS ---------------- */
function highlightMatch(text,query){return text.replace(new RegExp(query,"gi"),match=>`<span class="highlight">${match}</span>`);}

// Improved fuzzy scoring system
function fuzzyScore(str,query){
    str=str.toLowerCase(); query=query.toLowerCase();
    if(str.includes(query)) return 100;
    let score=0;
    let strWords=str.split(/\s+/);
    let queryWords=query.split(/\s+/);
    queryWords.forEach(qw=>{
        strWords.forEach(sw=>{
            if(sw.startsWith(qw)) score+=15;       // prefix match
            else if(sw.includes(qw)) score+=10;   // partial match
        });
    });
    return score;
}

function computeScore(item,query){
    // Weighted: title > keywords > description
    let titleScore=fuzzyScore(item.title,query)*3;
    let keywordScore=item.keywords.reduce((acc,k)=>acc+fuzzyScore(k,query)*2,0);
    let descScore=fuzzyScore(item.desc,query);
    let sizeScore=item.size/1024; // keep original
    return titleScore + keywordScore + descScore + sizeScore;
}

/* ---------------- CATEGORY FILTER ---------------- */
let categories=[...new Set(database.map(d=>d.category))];
let catContainer=document.getElementById("categoryFilter");
categories.forEach(cat=>{
    let btn=document.createElement("button");
    btn.innerText=cat;
    btn.onclick=()=>{Array.from(catContainer.children).forEach(c=>c.classList.remove("active")); btn.classList.add("active"); showResults(cat);}
    catContainer.appendChild(btn);
});

/* ---------------- DISPLAY RESULTS ---------------- */
let resultArea=document.getElementById("resultsArea");

function showResults(filterCategory=null){
    resultArea.innerHTML="";
    let filtered=database.map(d=>({...d,score:computeScore(d,query)}));
    if(filterCategory) filtered=filtered.filter(d=>d.category===filterCategory);
    filtered.sort((a,b)=>b.score-a.score);
    if(filtered.length === 0) filtered = database.slice(0, 5).map(d=>({...d,score:0}));
    filtered.forEach(res=>{
        let div=document.createElement("div");
        div.className="result-box";
        div.innerHTML=`
            <a class="result-title" href="${res.link}">${highlightMatch(res.title,query)}</a>
            <div class="result-link">${res.link} (Size: ${Math.round(res.size/1024)} KB)</div>
            <div class="result-desc">${highlightMatch(res.desc, query)}</div>
        `;
        resultArea.appendChild(div);
        setTimeout(()=>div.classList.add("show"),100);
    });
}

showResults();
</script>

</body>
</html>
