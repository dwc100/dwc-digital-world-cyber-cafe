<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Alert Panel (Updated)</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  background:#eef2ff;
  font-family:'Poppins',sans-serif;
}

.panel{
  max-width:650px;
  margin:50px auto;
  background:white;
  padding:25px;
  border-radius:16px;
  box-shadow:0 4px 18px rgba(0,0,0,0.15);
}

h2{
  text-align:center;
  color:#5a00ff;
  font-weight:700;
}

textarea{
  width:100%;
  height:100px;
  margin-top:10px;
  padding:12px;
  font-size:1rem;
  border-radius:8px;
  border:1px solid #bbb;
}

select{
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:8px;
  border:1px solid #bbb;
}

button{
  margin-top:15px;
  width:100%;
  padding:12px;
  background:#5a00ff;
  color:white;
  font-size:1.1rem;
  border:none;
  border-radius:10px;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  background:#3d00b6;
}

.alert-list{
  margin-top:30px;
}

.alert-item{
  background:#fff;
  padding:15px;
  margin-bottom:12px;
  border-left:6px solid #5a00ff;
  border-radius:10px;
  box-shadow:0 3px 10px rgba(0,0,0,0.1);
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.alert-item.warning{border-left-color:#ff8800;}
.alert-item.danger{border-left-color:#ff3b3b;}

.delete-btn{
  background:#ff3b3b;
  color:white;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  transition:0.2s;
}

.delete-btn:hover{
  background:#c40000;
}
</style>
</head>
<body>

<div class="panel">
  <h2>Admin Alert Control</h2>

  <label>Alert Message:</label>
  <textarea id="msg"></textarea>

  <label>Alert Type:</label>
  <select id="alertType">
    <option value="info">Info</option>
    <option value="warning">Warning</option>
    <option value="danger">Danger</option>
  </select>

  <button onclick="sendAlert()">Send Alert</button>
  <div id="alertList" class="alert-list"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCZ6UoTAc1BxLkQtnqdq4FXxc3tSTiEZso",
  authDomain: "systemalert-c2c23.firebaseapp.com",
  projectId: "systemalert-c2c23",
  storageBucket: "systemalert-c2c23.firebasestorage.app",
  messagingSenderId: "458431925330",
  appId: "1:458431925330:web:722c4afbee90acfcca238b",
  measurementId: "G-5HVBND1F03"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function sendAlert(){
    let text = document.getElementById("msg").value;
    let type = document.getElementById("alertType").value;

    if(text.trim() === ""){
        alert("Message cannot be empty!");
        return;
    }

    db.ref("alerts").push({ message: text, type: type });

    alert("Alert Sent Successfully!");
    document.getElementById("msg").value="";
}

function loadAlerts(){
  db.ref("alerts").on("value", snapshot => {
    let container = document.getElementById("alertList");
    container.innerHTML = "";

    snapshot.forEach(child => {
      let data = child.val();
      let id = child.key;

      let box = document.createElement("div");
      box.className = `alert-item ${data.type}`;

      box.innerHTML = `
        <div>${data.message}</div>
        <button class="delete-btn" onclick="deleteAlert('${id}')">Delete</button>
      `;

      container.appendChild(box);
    });
  });
}

function deleteAlert(id){
  db.ref("alerts/" + id).remove();
  alert("Alert deleted!");
}

loadAlerts();
</script>

</body>
</html>