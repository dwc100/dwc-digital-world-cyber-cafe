<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>3D Train Driving Game (White Edition)</title>
<link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/1gQKw6b/56.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/1gQKw6b/56.png">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<style>
html, body {
  margin: 0;
  height: 100%;
  overflow: hidden;
  background: radial-gradient(circle at center, #ffffff, #f0f0f0);
  font-family: 'Poppins', sans-serif;
}
#hud {
  position: fixed;
  top: 15px;
  left: 15px;
  background: rgba(255,255,255,0.6);
  padding: 10px 18px;
  border-radius: 15px;
  border: 1px solid rgba(0,0,0,0.1);
  backdrop-filter: blur(10px);
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  color: #222;
}
#hud strong {
  font-size: 16px;
  color: #111;
}
#hud span {
  display: block;
  font-size: 14px;
  margin-top: 4px;
}
</style>
</head>
<body>
<div id="hud">
  <strong>ðŸš„ Train Simulator</strong>
  <span id="speed">Speed: 0 km/h</span>
  <span id="dist">Distance: 0 m</span>
  <span>Press â†‘ or W to move</span>
</div>

<script>
// === BASIC SCENE SETUP ===
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0xffffff, 10, 300);

const camera = new THREE.PerspectiveCamera(70, innerWidth / innerHeight, 0.1, 1000);
camera.position.set(0, 3, 10);

const renderer = new THREE.WebGLRenderer({antialias: true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
renderer.setClearColor(0xffffff);
document.body.appendChild(renderer.domElement);

// === LIGHTING ===
scene.add(new THREE.AmbientLight(0xffffff, 0.8));
const dirLight = new THREE.DirectionalLight(0xffffff, 0.7);
dirLight.position.set(10, 20, 10);
scene.add(dirLight);

// === TRACK ===
const trackMat = new THREE.MeshStandardMaterial({
  color: 0xdddddd,
  metalness: 0.5,
  roughness: 0.4
});
const tiesMat = new THREE.MeshStandardMaterial({color: 0x999999});
const trackGroup = new THREE.Group();
for (let i = 0; i < 100; i++) {
  const rail1 = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.1, 5), trackMat);
  rail1.position.set(-1, 0, -i * 5);
  const rail2 = rail1.clone();
  rail2.position.x = 1;
  const tie = new THREE.Mesh(new THREE.BoxGeometry(2.5, 0.05, 0.3), tiesMat);
  tie.position.set(0, -0.05, -i * 5);
  trackGroup.add(rail1, rail2, tie);
}
scene.add(trackGroup);

// === TRAIN ===
const train = new THREE.Group();
const bodyMat = new THREE.MeshStandardMaterial({
  color: 0xffffff,
  metalness: 0.3,
  roughness: 0.2
});
const accentMat = new THREE.MeshStandardMaterial({
  color: 0x222222,
  metalness: 0.6,
  roughness: 0.4
});

// Body
const body = new THREE.Mesh(new THREE.BoxGeometry(2, 1, 3), bodyMat);
body.position.y = 0.6;
train.add(body);

// Front Nose
const nose = new THREE.Mesh(new THREE.ConeGeometry(1, 1.5, 20), accentMat);
nose.rotation.x = Math.PI;
nose.position.set(0, 0.9, 2);
train.add(nose);

// Wheels
for (let x of [-0.8, 0.8]) {
  for (let z of [-1.2, 1.2]) {
    const wheel = new THREE.Mesh(new THREE.TorusGeometry(0.25, 0.08, 12, 20), accentMat);
    wheel.rotation.x = Math.PI / 2;
    wheel.position.set(x, 0.25, z);
    train.add(wheel);
  }
}
scene.add(train);

// === MOTION ===
let speed = 0, distance = 0;
let forward = false;
document.addEventListener('keydown', e => {
  if (e.key === 'w' || e.key === 'ArrowUp') forward = true;
});
document.addEventListener('keyup', e => {
  if (e.key === 'w' || e.key === 'ArrowUp') forward = false;
});

// === ANIMATION LOOP ===
function animate() {
  requestAnimationFrame(animate);

  // Control speed
  if (forward) speed += 0.5;
  else speed *= 0.98;

  // Limit speed (â‰ˆ1000 km/h â†’ 277 m/s)
  if (speed > 277) speed = 277;
  if (speed < 0.1) speed = 0;

  // Move track (infinite effect)
  trackGroup.position.z += speed * 0.016;
  if (trackGroup.position.z > 5) trackGroup.position.z -= 5;

  // Wheel rotation
  train.children.forEach(part => {
    if (part.geometry.type === "TorusGeometry") {
      part.rotation.z -= speed * 0.005;
    }
  });

  // Camera follow
  camera.position.lerp(new THREE.Vector3(0, 3, train.position.z + 10), 0.05);
  camera.lookAt(train.position.x, train.position.y + 0.5, train.position.z - 5);

  // HUD Update
  document.getElementById('speed').innerText = "Speed: " + Math.round(speed * 3.6) + " km/h";
  document.getElementById('dist').innerText = "Distance: " + Math.round(distance += speed * 0.016) + " m";

  renderer.render(scene, camera);
}
animate();

// Resize
onresize = () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
};
</script>
</body>
</html>
